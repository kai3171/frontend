{"version":3,"sources":["webpack:///src/views/login/Login.vue","webpack:///./src/views/login/Login.vue?a4a5","webpack:///./src/views/login/Login.vue"],"names":["Login","computed","emailState","test","this","email","pswState","password","length","data","errorShow","methods","login","_this","formData","FormData","append","Object","api","then","res","console","log","$store","state","nologin","$router","push","name","commit","localStorage","setItem","getItem","sessionStorage","login_Login","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","fluid","_v","variant","show","dismissible","model","value","callback","$$v","expression","sm","for","id","aria-describedby","placeholder","type","staticStyle","display","align-content","flex-wrap","to","cols","on","click","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/21.67af8cbb296a4e2a3fdb.js","sourcesContent":["<template>\n    <div class=\"login\">\n      <b-jumbotron>\n      <b-container fluid>\n        <b-row class=\"my-1\">\n          <b-col>\n            <h1>Please LogIn</h1>\n          </b-col>\n        </b-row>\n        <hr />\n        <b-alert v-model=\"errorShow\" variant=\"danger\" show dismissible>Email Address or Password Error</b-alert>\n        <b-row class=\"my-1\">\n          <b-col sm=\"3\">\n            <label for=\"input-invalid\">Email</label>\n          </b-col>\n        </b-row>\n        <b-row class=\"my-1\">\n          <b-col sm=\"9\">\n            <b-form-input id=\"input-invalid-email\" :state=\"emailState\" aria-describedby=\"input-email\"\n            placeholder=\"Your email address\" v-model=\"email\" type=\"email\"></b-form-input>\n            <b-form-invalid-feedback id=\"input-email\">\n              Please input the correct email address\n            </b-form-invalid-feedback>\n          </b-col>\n        </b-row>\n        <b-row class=\"my-1\">\n          <b-col sm=\"3\">\n            <label for=\"input-invalid\">Password</label>\n          </b-col>\n        </b-row>\n        <b-row class=\"my-1\">\n          <b-col sm=\"9\">\n            <b-form-input id=\"input-invalid-psw\" :state=\"pswState\" aria-describedby=\"input-psw\"\n            placeholder=\"Your password\" v-model=\"password\" type=\"password\"></b-form-input>\n            <b-form-invalid-feedback id=\"input-psw\">\n              Password cannot be empty\n            </b-form-invalid-feedback>\n          </b-col>\n          <b-col sm=\"3\" style=\"display:flex;align-content:space-around;flex-wrap:wrap\">\n            <router-link to=\"/reset\"> Forget Password?</router-link>\n          </b-col>\n        </b-row>\n        <br/>\n        <b-row cols=\"my-1\">\n          <b-col sm=\"3\">\n            <b-button @click=\"login\">Log in</b-button>\n          </b-col>\n        </b-row>\n        <br/>\n        <p>You don't have an account yet? <router-link to=\"/register\"> Register a new account</router-link></p>\n      </b-container>\n    </b-jumbotron>\n    </div>\n  </template>\n\n<script>\nimport { login } from '../../api'\nexport default {\n  computed: {\n    emailState () {\n      return /^[a-zA-Z0-9_-]+@[a-zA-Z0-9_-]+(\\.[a-zA-Z0-9_-]+)+$/.test(this.email)\n    },\n    pswState () {\n      return this.password.length > 5\n    }\n  },\n  data () {\n    return {\n      email: '',\n      password: '',\n      errorShow: false\n    }\n  },\n\n  methods: {\n    login () {\n      // this.errorShow = false\n      // if (!this.emailCheck(this.email)) {\n      //   console.log('email is not correct')\n      //   this.errorShow = true\n      // } else if (this.email === '1') {\n      //   console.log('email is empty')\n      // } else {\n      //   this.$router.push('/upload')\n      //   sessionStorage.setItem('loginState', true)\n      //   sessionStorage.setItem('email', this.email)\n      // }\n      let formData = new FormData()\n      formData.append('email', this.email)\n      formData.append('password', this.password)\n      login(formData).then(res => {\n        if (res.data === 'error') {\n          this.errorShow = true\n        } else {\n          // if (location.href.indexOf('#reloaded') === -1) {\n          //   location.href = location.href + '#reloaded'\n          //   window.location.reload()\n          // }\n          console.log(this.$store.state.nologin)\n          // this.$router.go(-1)\n          this.$router.push({name: 'Home'})\n          console.log(this.$store.state.nologin)\n          this.$store.commit('setLoginState', false)\n          console.log(this.$store.state.nologin)\n          // sessionStorage.setItem('email', this.email)\n          // sessionStorage.setItem('name', res.data['name'])\n          console.log('loging success')\n          console.log(this.$store.state.nologin)\n          console.log(res.data['name'])\n          console.log(this.$store.state.nologin)\n          localStorage.setItem('email', this.email)\n          console.log(this.$store.state.nologin)\n          localStorage.setItem('name', res.data['name'])\n          this.$store.commit('setNameState', res.data['name'])\n          console.log(this.$store.state.nologin)\n          console.log('huancunwei:')\n          console.log(localStorage.getItem('email'))\n          console.log(this.$store.state.nologin)\n          sessionStorage.setItem('loginState', true)\n          console.log(this.$store.state.nologin)\n        }\n      })\n    }\n  }\n}\n\n</script>\n<style scoped>\n.login{\n  width: 750px;\n  margin: auto;\n  margin-top: 40px;\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/views/login/Login.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"login\"},[_c('b-jumbotron',[_c('b-container',{attrs:{\"fluid\":\"\"}},[_c('b-row',{staticClass:\"my-1\"},[_c('b-col',[_c('h1',[_vm._v(\"Please LogIn\")])])],1),_vm._v(\" \"),_c('hr'),_vm._v(\" \"),_c('b-alert',{attrs:{\"variant\":\"danger\",\"show\":\"\",\"dismissible\":\"\"},model:{value:(_vm.errorShow),callback:function ($$v) {_vm.errorShow=$$v},expression:\"errorShow\"}},[_vm._v(\"Email Address or Password Error\")]),_vm._v(\" \"),_c('b-row',{staticClass:\"my-1\"},[_c('b-col',{attrs:{\"sm\":\"3\"}},[_c('label',{attrs:{\"for\":\"input-invalid\"}},[_vm._v(\"Email\")])])],1),_vm._v(\" \"),_c('b-row',{staticClass:\"my-1\"},[_c('b-col',{attrs:{\"sm\":\"9\"}},[_c('b-form-input',{attrs:{\"id\":\"input-invalid-email\",\"state\":_vm.emailState,\"aria-describedby\":\"input-email\",\"placeholder\":\"Your email address\",\"type\":\"email\"},model:{value:(_vm.email),callback:function ($$v) {_vm.email=$$v},expression:\"email\"}}),_vm._v(\" \"),_c('b-form-invalid-feedback',{attrs:{\"id\":\"input-email\"}},[_vm._v(\"\\n          Please input the correct email address\\n        \")])],1)],1),_vm._v(\" \"),_c('b-row',{staticClass:\"my-1\"},[_c('b-col',{attrs:{\"sm\":\"3\"}},[_c('label',{attrs:{\"for\":\"input-invalid\"}},[_vm._v(\"Password\")])])],1),_vm._v(\" \"),_c('b-row',{staticClass:\"my-1\"},[_c('b-col',{attrs:{\"sm\":\"9\"}},[_c('b-form-input',{attrs:{\"id\":\"input-invalid-psw\",\"state\":_vm.pswState,\"aria-describedby\":\"input-psw\",\"placeholder\":\"Your password\",\"type\":\"password\"},model:{value:(_vm.password),callback:function ($$v) {_vm.password=$$v},expression:\"password\"}}),_vm._v(\" \"),_c('b-form-invalid-feedback',{attrs:{\"id\":\"input-psw\"}},[_vm._v(\"\\n          Password cannot be empty\\n        \")])],1),_vm._v(\" \"),_c('b-col',{staticStyle:{\"display\":\"flex\",\"align-content\":\"space-around\",\"flex-wrap\":\"wrap\"},attrs:{\"sm\":\"3\"}},[_c('router-link',{attrs:{\"to\":\"/reset\"}},[_vm._v(\" Forget Password?\")])],1)],1),_vm._v(\" \"),_c('br'),_vm._v(\" \"),_c('b-row',{attrs:{\"cols\":\"my-1\"}},[_c('b-col',{attrs:{\"sm\":\"3\"}},[_c('b-button',{on:{\"click\":_vm.login}},[_vm._v(\"Log in\")])],1)],1),_vm._v(\" \"),_c('br'),_vm._v(\" \"),_c('p',[_vm._v(\"You don't have an account yet? \"),_c('router-link',{attrs:{\"to\":\"/register\"}},[_vm._v(\" Register a new account\")])],1)],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-182b0f29\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/login/Login.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-182b0f29\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./Login.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./Login.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./Login.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-182b0f29\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./Login.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-182b0f29\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/login/Login.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}